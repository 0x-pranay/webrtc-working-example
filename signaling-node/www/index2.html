<!doctype html>
<html>
  <head>
    <title>WebRTC Client</title>
    <link rel="stylesheet" href="style.css" />
    <script src="https://webrtc.github.io/adapter/adapter-latest.js"></script>

    <script src="https://cdn.socket.io/4.0.1/socket.io.min.js"></script>
  </head>

  <body>
    <h2>Request Live Stream</h2>
    <label>Client ID:</label>
    <input type="text" id="clientId" placeholder="Enter Client ID" /><br />
    <label>Fleet ID:</label>
    <input type="text" id="fleetId" placeholder="Enter Fleet ID" /><br />
    <label>Device ID:</label>
    <input type="text" id="deviceId" placeholder="Enter Device ID" /><br />
    <button id="requestLiveStream" onclick="requestLiveStream()">
      Request Live Stream
    </button>
    <button
      id="stopLiveStream"
      onclick="stopLiveStream()"
      style="display: none"
    >
      Stop Live Stream
    </button>
    <p>Session ID: <span id="sessionId"></span></p>

    <div id="sessionControls">
      <label for="sessionIdInput">Session ID:</label>
      <input
        type="text"
        id="sessionIdInput"
        placeholder="Leave blank for new session"
      />
      <button id="joinSessionButton">Join Session</button>
      <button id="copySessionIdButton">Copy Session ID</button>
    </div>

    <div id="controls">
      <button id="startStopButton">Start Stream</button>
      <button id="toggleAudioButton">Disable Audio</button>
      <button id="toggleVideoButton">Disable Video</button>

      <label for="bandwidthSelect">Bandwidth Cap:</label>
      <select id="bandwidthSelect">
        <option value="0">No Cap</option>
        <option value="128">128 Kbit</option>
        <option value="256">256 Kbit</option>
        <option value="512">512 Kbit</option>
        <option value="1000">1 Mbit</option>
        <option value="1500">1.5 Mbit</option>
        <option value="2000">2 Mbit</option>
      </select>
      <div class="box">
        <span>Codec preferences:</span>
        <select id="codecPreferences" disabled>
          <option selected value="">Default</option>
        </select>
        <div id="actualCodec"></div>
      </div>
    </div>

    <h2>Local Video</h2>
    <video id="localVideo" autoplay muted></video>
    <div id="localStats">
      <p>Resolution: <span id="localResolution"></span></p>
      <p>Bitrate: <span id="localBitrate"></span></p>
    </div>

    <h2>Remote Videos</h2>
    <div id="remoteVideos">
      <!-- Remote video streams will be added here -->
    </div>

    <script src="script2.js"></script>
  </body>
</html>
